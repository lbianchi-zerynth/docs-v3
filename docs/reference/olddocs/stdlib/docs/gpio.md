## GPIO

Generic GPIO module for transparently handling physical pins and pins controlled by port expanders.

The `gpio` module defined the following constants:
```
PE_ADS7128  = 1
PE_ADS1015  = 2
PE_PCAL6524 = 3
PE_SX1503   = 4
```
used as names for the Port Expander supported chips.

### function `set`
```python
set(pin, value)
```
Sets the `pin` gpio to logic value `value`.

`pin` can be either the pin number or the symbolic name defined into `board` module from `bsp` `value` can be `0` or `1`.

### function `get`
```python
get(pin)
```
Returns the value read on `pin` gpio.

### function `latch`
```python
latch(pin)
```
Return the latch register value for the `pin` gpio.

### function `toggle`
```python
toggle(pin)
```
Invert the output value of the `pin` gpio.

### function `mode`
```python
mode(pin, mode)
```
Configures the `pin` gpio with `mode` mode.

### function `high`
```python
high(pin)
```
Set the `pin` gipo to logic `1`.

### function `low`
```python
low(pin)
`Set the `pin` gipo to logic `0`.
``

### function `on_rise`
```python
on_rise(pin, fn, debounce=0, pull=INPUT_PULLDOWN)
```
Registers the `fn` function as callback on the rising edge on the `pin` gpio. De-bouncing with a delay of `debounce` milliseconds and setting a `pull` pull-up or pull-down resistor.

### function `on_fall`
```python
on_fall(pin, fn, debounce=0, pull=INPUT_PULLUP)
```
Registers the `fn` function as callback on the falling edge on the `pin` gpio. De-bouncing with a delay of `debounce` milliseconds and setting a `pull` pull-up or pull-down resistor.

### function `on_rise_and_fall`
```python
on_rise_and_fall(pin, fn, debounce=0, pull=INPUT_PULLDOWN)
```
Registers the `fn` function as callback either on the rising and falling edges on the `pin` gpio. De-bouncing with a delay of `debounce` milliseconds and setting a `pull` pull-up or pull-down resistor.

### function `disable_interrupt`
```python
disable_interrupt(pin)
```
Disable the interrupt triggered by configured edge(s) for the `pin` gpio. By disabling the interrupt triggering, the callbacks registered on the `pin` will **not** be called.

### function `add_expander`
```python
add_expander(petype, startpin, npins, alertpin, address, i2c=I2C0)
```
Configures a Port Expander of `petype` (see the PE constants defined in this module), starting at board pin number `startpin`, with a total of `npins` pins. `alertpin` is the pin used for the interrupts generated by the PE being configured. `address` is the I2C bus address of the port expander on right-aligned 7bits. `i2c` is the system bus number.

## Examples

The module can be used without configuration like this:
```python
import gpio


gpio.mode(D10, OUTPUT)  # Set mode for D10
gpio.mode(D11, OUTPUT)  # Set mode for D11
gpio.high(D10)          # Set D10 high
gpio.low(D11)           # Set D11 low
```

More advanced configurations allow the use of port expanders:
```python
import gpio
from semtech.sx1503 import sx1503    # a port expander driver for sx1503

# initialize port expander driver
pdriver = sx1503.SX1503(I2C0)        # sx1503 is connected on I2C0

pinmap = {                           # now add pins definition for the expander
    100: 7,                          # pin "100" maps to pin 7 on sx1503 
    101: 14,                         # pin "101" maps to pin 14 on sx1503
    102: 15                          # pin "102" maps to pin 15 on sx1503
}

gpio.add_expander(1,pdriver,pinmap)  # add expander to gpio module
                                     # with id = 1, using pdriver
                                     # and mapping the pins in pinmap

# from here on, every library using gpio can access the port expander
# without knowing about its existence! Like this:

mypin1 = D10
mypin2 = 100

gpio.mode(mypin1,OUTPUT)             # configure D10 as output
gpio.mode(mypin2,OUTPUT)             # configure pin "100" as output on sx1503

gpio.high(mypin1)                    # set pin D10 to high
gpio.low(mypin2)                     # set pin "100" to low
```